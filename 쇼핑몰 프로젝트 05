#include <stdio.h>
#include <string.h>

#define MAX 5
#define LEN 50

int main() {
    int stock[MAX] = {0};
    int sold[MAX] = {0};
    char name[MAX][LEN];
    int i, choice;
    int input_count = 0;
    int in, out;

    while (1) {
        printf("원하는 메뉴를 선택하세요.(1.입고, 2.판매, 3.상품현황, 4.상품명 입력, 5.종료)\n");
        scanf("%d", &choice);

        if (choice == 1) {
            if (input_count == 0) {
                printf("상품명이 입력되지 않았습니다.\n");
                continue;
            }
            printf("입고할 상품의 ID를 입력하세요 (1~%d): ", input_count);
            scanf("%d", &i);
            if (i < 1 || i > input_count) {
                printf("잘못된 번호입니다.\n");
                continue;
            }
            printf("입고 수량: ");
            scanf("%d", &in);
            stock[i - 1] += in;
        }

        else if (choice == 2) {
            if (input_count == 0) {
                printf("상품명이 입력되지 않았습니다.\n");
                continue;
            }
            printf("판매할 상품의 ID를 입력하세요 (1~%d): ", input_count);
            scanf("%d", &i);
            if (i < 1 || i > input_count) {
                printf("잘못된 번호입니다.\n");
                continue;
            }
            printf("판매 수량: ");
            scanf("%d", &out);
            if (out > stock[i - 1]) {
                printf("재고가 부족합니다.\n");
                continue;
            }
            stock[i - 1] -= out;
            sold[i - 1] += out;
        }

        else if (choice == 3) {
            if (input_count == 0) {
                printf("상품명이 입력되지 않았습니다.\n");
                continue;
            }
            int total_stock = 0, total_sold = 0;
            for (i = 0; i < input_count; i++) {
                total_stock += stock[i];
                total_sold += sold[i];
            }
            printf("재고수량: ");
            for (i = 0; i < input_count; i++) printf("%d ", stock[i]);
            printf("\n총 판매량: %d개 (판매율 %.2f%%)\n", total_sold, total_sold + total_stock == 0 ? 0.0 : (double)total_sold / (total_sold + total_stock) * 100);

            int max = 0, min = 0;
            for (i = 1; i < input_count; i++) {
                if (sold[i] > sold[max]) max = i;
                if (sold[i] < sold[min]) min = i;
            }
            printf("가장 많이 판매된 상품: ID %d, 상품명: %s, 판매량 %d\n", max + 1, name[max], sold[max]);
            printf("가장 적게 판매된 상품: ID %d, 상품명: %s, 판매량 %d\n", min + 1, name[min], sold[min]);
            for (i = 0; i < input_count; i++)
                printf("상품 ID %d: %s, 재고수량 %d\n", i + 1, name[i], stock[i]);
        }

        else if (choice == 4) {
            printf("입력할 상품 개수: ");
            scanf("%d", &input_count);
            if (input_count > MAX) input_count = MAX;
            for (i = 0; i < input_count; i++) {
                printf("상품명 %d: ", i + 1);
                scanf("%s", name[i]);
                stock[i] = 0;
                sold[i] = 0;
            }
        }

        else if (choice == 5) {
            printf("프로그램을 종료합니다.\n");
            break;
        }

        else {
            printf("잘못된 입력입니다.\n");
        }
    }
    return 0;
}
